# Markdown Studio

[English (README.en.md)](README.en.md) · 中文说明

一个基于浏览器的轻量级 Markdown 编辑与预览示例应用。无需构建与后端服务，直接用本地浏览器打开即可使用。

- 实时预览：边写边看，所见即所得
- 视图切换：仅编辑 / 分屏 / 仅预览
- 代码高亮：集成 highlight.js（GitHub 主题）
- 键盘支持：Tab 缩进、Shift+Tab 反缩进，支持多行块操作
- 导出能力：一键导出为 `.md` 或自包含的 `.html`
- 本地存储：自动保存到 `localStorage`，刷新页面不丢内容

## 在线/本地使用

- 直接双击或拖拽打开 `index.html` 到浏览器即可使用。
- 首次打开会加载示例文档，之后会自动恢复你上次编辑的内容。

> 说明：预览/导出中的代码高亮通过 CDN 加载 `highlight.js`，确保网络可访问对应 CDN。

## 功能概览

- Markdown 解析：支持标题、段落、粗体/斜体、删除线、行内代码、代码块、引用、无序/有序列表、链接与图片。
- 视图模式：
  - `仅编辑`：专注写作
  - `分屏`：左右同步显示编辑与预览
  - `仅预览`：专注阅读
- 导出：
  - `导出 Markdown`：根据文档标题自动生成安全文件名，下载 `.md` 文件
  - `导出 HTML`：生成可独立打开的 HTML 文件，内嵌样式并启用代码高亮
- 编辑体验：
  - Tab 插入缩进；Shift+Tab 取消缩进
  - 多行选择时可批量缩进/反缩进，光标位置与选区会被合理更新
- 持久化：
  - 自动将内容保存到 `localStorage` 的 `markdown-studio-content` 键
  - 记住侧栏显示/隐藏状态
  - 记住最近打开的目录（依赖浏览器的 File System Access API 与 IndexedDB；若权限允许会在加载时自动恢复）

## 快速开始

1. 克隆或下载本仓库
2. 用浏览器打开 `index.html`
3. 左侧输入 Markdown，右侧实时查看预览
4. 通过工具栏在三种视图间切换，或导出文件

## 目录结构

```
web-demos/
├─ index.html     # 应用入口（中文界面，含工具栏与双栏布局）
├─ styles.css     # UI 样式（分屏布局、预览样式、代码区样式等）
├─ main.js        # 解析、渲染、视图切换、导出与键盘交互逻辑
└─ README.md      # 当前文档（中文）
└─ README.en.md   # 英文文档（English）
```

## 技术说明

- 解析：使用自定义的轻量规则实现常用 Markdown 功能，避免体积过大
- 高亮：通过 `highlight.js` CDN 对代码块按语言进行高亮
- 文件名：根据首个标题或首行内容生成文件名，自动清理不安全字符
- 安全：导出使用 `Blob` 与浏览器下载机制；渲染时对 HTML 做转义以减少 XSS 风险

## 兼容性

- 现代桌面浏览器（Chrome、Edge、Firefox、Safari）均可正常使用
- 移动设备可打开但编辑体验受限，推荐桌面环境

## 常见问题

- 表格语法：当前解析器未内置原生表格 Markdown 支持，但导出的 HTML 样式包含表格样式，后续可扩展解析能力
- 网络访问：预览的代码高亮依赖 CDN，如网络受限请更换或离线引入对应脚本与样式

## 贡献

欢迎提交 Issue 与 PR 改进解析能力、交互体验与样式设计。
